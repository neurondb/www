<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700" role="img" aria-label="RAG operations loop diagram">
  <defs>
    <linearGradient id="panel" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0" stop-color="#0b1220"/>
      <stop offset="1" stop-color="#111827"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="18" stdDeviation="16" flood-color="#000" flood-opacity="0.55"/>
    </filter>
    <marker id="arrow" markerWidth="6" markerHeight="6" refX="6" refY="3" orient="auto" markerUnits="userSpaceOnUse">
      <path d="M0,0 L6,3 L0,6 Z" fill="#fbbf24"/>
    </marker>
  </defs>

  <rect x="40" y="40" width="1120" height="620" rx="28" fill="url(#panel)" stroke="#334155" filter="url(#shadow)"/>

  <text x="100" y="98" fill="#e2e8f0" font-size="22" font-weight="900"
        font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
    RAG is architecture + operations
  </text>
  <text x="100" y="128" fill="#94a3b8" font-size="14" font-weight="600"
        font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
    Quality comes from a loop: ingest → prepare → retrieve → answer → evaluate → improve.
  </text>

  <!-- Loop ring -->
  <circle cx="600" cy="380" r="210" fill="none" stroke="#334155" stroke-width="2" opacity="0.9"/>
  <circle cx="600" cy="380" r="160" fill="none" stroke="#334155" stroke-width="2" opacity="0.35"/>

  <!-- Steps -->
  <g font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
    <!-- Ingest -->
    <rect x="510" y="150" width="180" height="74" rx="16" fill="#0f172a" stroke="#22d3ee" stroke-opacity="0.55"/>
    <text x="600" y="182" fill="#e2e8f0" font-size="14" font-weight="900" text-anchor="middle">Ingest</text>
    <text x="600" y="204" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">docs, tickets, logs</text>

    <!-- Chunk -->
    <rect x="770" y="260" width="180" height="74" rx="16" fill="#0f172a" stroke="#a78bfa" stroke-opacity="0.6"/>
    <text x="860" y="292" fill="#e2e8f0" font-size="14" font-weight="900" text-anchor="middle">Chunk</text>
    <text x="860" y="314" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">size, overlap, structure</text>

    <!-- Embed -->
    <rect x="820" y="420" width="180" height="74" rx="16" fill="#0f172a" stroke="#60a5fa" stroke-opacity="0.65"/>
    <text x="910" y="452" fill="#e2e8f0" font-size="14" font-weight="900" text-anchor="middle">Embed + index</text>
    <text x="910" y="474" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">drift + growth</text>

    <!-- Retrieve -->
    <rect x="600" y="520" width="200" height="74" rx="16" transform="translate(-100,0)" fill="#0f172a" stroke="#34d399" stroke-opacity="0.6"/>
    <text x="600" y="552" fill="#e2e8f0" font-size="14" font-weight="900" text-anchor="middle">Retrieve</text>
    <text x="600" y="574" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">recall / precision</text>

    <!-- Generate -->
    <rect x="250" y="420" width="180" height="74" rx="16" fill="#0f172a" stroke="#fbbf24" stroke-opacity="0.65"/>
    <text x="340" y="452" fill="#e2e8f0" font-size="14" font-weight="900" text-anchor="middle">Generate</text>
    <text x="340" y="474" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">grounded prompts</text>

    <!-- Evaluate -->
    <rect x="250" y="260" width="180" height="74" rx="16" fill="#0f172a" stroke="#f97316" stroke-opacity="0.7"/>
    <text x="340" y="292" fill="#e2e8f0" font-size="14" font-weight="900" text-anchor="middle">Evaluate</text>
    <text x="340" y="314" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">citations, QA, metrics</text>
  </g>

  <!-- Arrows around ring -->
  <path d="M690 190 C780 215 820 240 848 275" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M940 335 C980 380 985 410 970 440" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M850 490 C780 540 720 565 660 575" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M500 575 C420 560 380 530 360 495" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M300 420 C250 380 245 340 270 320" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M430 275 C470 240 500 215 510 205" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>

  <!-- Callouts -->
  <g font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
    <rect x="820" y="120" width="300" height="70" rx="18" fill="#0b1220" stroke="#334155"/>
    <text x="840" y="150" fill="#e2e8f0" font-size="13" font-weight="900">Monitor:</text>
    <text x="910" y="150" fill="#94a3b8" font-size="13" font-weight="650">no‑answer rate, citation coverage</text>
    <text x="840" y="170" fill="#94a3b8" font-size="13" font-weight="650">latency, cost, regressions</text>
  </g>
</svg>


