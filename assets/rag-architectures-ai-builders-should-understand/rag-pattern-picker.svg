<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="760" viewBox="0 0 1200 760" role="img" aria-label="Flowchart: choosing a RAG pattern">
  <defs>
    <linearGradient id="panel" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0" stop-color="#0b1220"/>
      <stop offset="1" stop-color="#111827"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="18" stdDeviation="16" flood-color="#000" flood-opacity="0.55"/>
    </filter>
    <marker id="arrow" markerWidth="6" markerHeight="6" refX="6" refY="3" orient="auto" markerUnits="userSpaceOnUse">
      <path d="M0,0 L6,3 L0,6 Z" fill="#fbbf24"/>
    </marker>
  </defs>

  <rect x="40" y="40" width="1120" height="680" rx="28" fill="url(#panel)" stroke="#334155" filter="url(#shadow)"/>

  <text x="100" y="98" fill="#e2e8f0" font-size="22" font-weight="900"
        font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
    How to pick the right RAG pattern
  </text>
  <text x="100" y="128" fill="#94a3b8" font-size="14" font-weight="600"
        font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
    A practical decision flow for builders.
  </text>

  <!-- Nodes -->
  <g font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
    <!-- Start -->
    <rect x="120" y="170" width="320" height="90" rx="18" fill="#0f172a" stroke="#22d3ee" stroke-opacity="0.55"/>
    <text x="280" y="206" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Start with Basic RAG</text>
    <text x="280" y="230" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">embed → retrieve → answer</text>

    <!-- Chat? -->
    <rect x="520" y="170" width="300" height="90" rx="18" fill="#0f172a" stroke="#a78bfa" stroke-opacity="0.6"/>
    <text x="670" y="202" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Do users chat back?</text>
    <text x="670" y="226" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">follow‑ups, pronouns, “that one”</text>

    <!-- Conversational -->
    <rect x="860" y="170" width="260" height="90" rx="18" fill="#0f172a" stroke="#a78bfa" stroke-opacity="0.6"/>
    <text x="990" y="206" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Conversational RAG</text>
    <text x="990" y="230" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">rewrite → retrieve</text>

    <!-- Costly mistakes? -->
    <rect x="520" y="320" width="300" height="90" rx="18" fill="#0f172a" stroke="#34d399" stroke-opacity="0.6"/>
    <text x="670" y="352" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Are mistakes expensive?</text>
    <text x="670" y="376" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">legal, finance, health, policy</text>

    <!-- Filtered -->
    <rect x="860" y="320" width="260" height="90" rx="18" fill="#0f172a" stroke="#34d399" stroke-opacity="0.6"/>
    <text x="990" y="356" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Filtered RAG</text>
    <text x="990" y="380" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">rerank + gates</text>

    <!-- Retrieval needed? -->
    <rect x="120" y="470" width="320" height="90" rx="18" fill="#0f172a" stroke="#fbbf24" stroke-opacity="0.65"/>
    <text x="280" y="502" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Is retrieval always needed?</text>
    <text x="280" y="526" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">or can we answer without it?</text>

    <!-- Adaptive -->
    <rect x="520" y="470" width="300" height="90" rx="18" fill="#0f172a" stroke="#fbbf24" stroke-opacity="0.65"/>
    <text x="670" y="506" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Adaptive RAG</text>
    <text x="670" y="530" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">route: no‑retrieve vs deep‑retrieve</text>

    <!-- Multi-step? -->
    <rect x="120" y="610" width="320" height="90" rx="18" fill="#0f172a" stroke="#f97316" stroke-opacity="0.7"/>
    <text x="280" y="642" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Do questions require steps?</text>
    <text x="280" y="666" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">plan, verify, loop, troubleshoot</text>

    <!-- Agent -->
    <rect x="520" y="610" width="300" height="90" rx="18" fill="#0f172a" stroke="#f97316" stroke-opacity="0.7"/>
    <text x="670" y="646" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Agent‑Driven RAG</text>
    <text x="670" y="670" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">plan → search → stop</text>

    <!-- Graph -->
    <rect x="860" y="610" width="260" height="90" rx="18" fill="#0f172a" stroke="#22c55e" stroke-opacity="0.55"/>
    <text x="990" y="646" fill="#e2e8f0" font-size="15" font-weight="900" text-anchor="middle">Graph‑Based RAG</text>
    <text x="990" y="670" fill="#94a3b8" font-size="12" font-weight="650" text-anchor="middle">relations drive meaning</text>
  </g>

  <!-- Connectors -->
  <path d="M440 215 H510" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M820 215 H850" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>

  <path d="M670 260 V310" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M820 365 H850" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>

  <path d="M520 515 H450" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M440 515 H450" stroke="#fbbf24" stroke-width="3" opacity="0"/>
  <path d="M440 410 C440 430 440 450 440 470" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>

  <path d="M280 560 V600" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M440 655 H510" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>
  <path d="M820 655 H850" stroke="#fbbf24" stroke-width="1.5" stroke-dasharray="1 3" stroke-dashoffset="1" stroke-linecap="round" fill="none" marker-end="url(#arrow)"/>

  <!-- Labels -->
  <g font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif" font-size="12" font-weight="800">
    <text x="835" y="205" fill="#34d399">Yes</text>
    <text x="835" y="355" fill="#34d399">Yes</text>
    <text x="455" y="500" fill="#fbbf24">Sometimes</text>
    <text x="455" y="205" fill="#94a3b8">No</text>
  </g>
</svg>


